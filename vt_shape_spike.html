<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Add a vector tile source</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='./dist/mapbox-gl-dev.js'></script>
    <link href='./dist/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

<div id='map'></div>
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiYmVuamFtaW4td3lzcyIsImEiOiJVcm5FdEw4In0.S8HRIEq8NqdtFVz2-BwQog';
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v9',
    zoom: 11,
    center: [-74.0060,40.7128]
});
map.showTileBoundaries = true;

map.on('load', function () {
  map.addSource('vectorDataSource', {
      "type": "vector",
      "tiles": [
        "https://data.cityofnewyork.us/resource/4vr5-tahr.geojson?$select=simplify_preserve_topology(snap_for_zoom(the_geom, {z}),0.000000001)&$where=the_geom is not null AND {{'the_geom' column condition}}&$limit=2000"
        // "https://data.cityofnewyork.us/resource/4vr5-tahr.geojson?$select=simplify_preserve_topology(snap_for_zoom(the_geom,{snap_zoom}),0.001) as __snapped_geom&$group=__snapped_geom&$where=the_geom is not null&$limit=2000"
      ]
  });

   map.addLayer({
    'id': 'fillLayer',
    'type': 'line',
    'source': 'vectorDataSource',
    'source-layer': '_geojsonTileLayer',
    'paint': {
      'line-color': '#288dc1',
    }
  });
});
</script>



</body>
</html>
